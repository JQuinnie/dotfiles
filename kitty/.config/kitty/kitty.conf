# Remote control (required for kitty-scrollback.nvim)
allow_remote_control yes
listen_on unix:/tmp/kitty
shell_integration enabled

# Faster Rendering
repaint_delay   10
input_delay     3
sync_to_monitor yes

# Enable splits layout
enabled_layouts splits,stack

# Split vertically (right) - use cmd+d
map cmd+d launch --location=vsplit --cwd=current

# Split horizontally (below)  
map cmd+shift+d launch --location=hsplit --cwd=current

# Or use different keys entirely
map ctrl+shift+d launch --location=vsplit --cwd=current
map ctrl+shift+s launch --location=hsplit --cwd=current

# Navigate between splits (cycles through all windows)
map cmd+[ previous_window
map cmd+] next_window

# Resize splits (enter resize mode, use arrow keys, Esc to exit)
map cmd+r start_resizing_window

# Close current split (keep this as cmd+w)
map cmd+w close_window

# Reload config
map cmd+shift+, load_config_file

# Window padding
window_padding_width 10
macos_titlebar_color background

# macOS - treat option as alt (matches Ghostty macos-option-as-alt)
macos_option_as_alt yes

# Background opacity (1.0 = fully opaque, 0.0 = fully transparent)
background_opacity 0.95

# Unfocused split dimming (matches Ghostty unfocused-split-opacity)
inactive_text_alpha 0.7

# Mouse and url
copy_on_select yes
mouse_map left click ungrabbed mouse_handle_click selection link prompt
url_style_curly
url_color #89b4fa
detect_urls yes
clipboard_control write-clipboard write-primary read-clipboard read-primary

# Navigation
# Move by word
map alt+left send_text all \x1b\x62
map alt+right send_text all \x1b\x66

# Move to beginning/end of line
map cmd+left send_text all \x01
map cmd+right send_text all \x05

# Optional: delete word
map alt+backspace send_text all \x17
map alt+delete send_text all \x1b\x64

# Delete line (from cursor to the beginning)
map cmd+backspace send_text all \x15

# BEGIN_KITTY_FONTS
font_family      family='JetBrainsMono Nerd Font Mono' postscript_name=JetBrainsMonoNFM-Regular
bold_font        auto
italic_font      auto
bold_italic_font auto
font_size        16.0
# END_KITTY_FONTS

# Tab bar customization
tab_bar_style         powerline
tab_powerline_style   round
tab_title_template    "{index}: {tab.active_wd} | {title} [{num_windows}]"

# scrollback
scrollback_pager_history_size 100
scrollback_lines 50000

# kitty-scrollback.nvim - search scrollback in neovim
action_alias kitty_scrollback_nvim kitten /Users/jchu/.local/share/nvim/lazy/kitty-scrollback.nvim/python/kitty_scrollback_nvim.py
# Browse scrollback buffer in nvim
map cmd+f kitty_scrollback_nvim
# Browse output of last shell command in nvim (Ctrl+Shift+G)
map kitty_mod+g kitty_scrollback_nvim --config ksb_builtin_last_cmd_output
# Show clicked command output in nvim
mouse_map ctrl+shift+right press ungrabbed combine : mouse_select_command_output : kitty_scrollback_nvim --config ksb_builtin_last_visited_cmd_output

# BEGIN_KITTY_THEME
# Gruvbox Dark
include themes/gruvbox-dark.conf
# END_KITTY_THEME
